app:
  description: æµ‹è¯•æœç´¢åŠŸèƒ½
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: 74-difyæ¡ˆä¾‹åˆ†äº«-è§£é” AI æœç´¢æ–°ç©æ³•ï¼šDify ç§˜å¡”æœç´¢å·¥ä½œæµæ­å»ºæ•™ç¨‹ä¸æ•ˆæœå±•ç¤º
  use_icon_as_answer_icon: false
dependencies: []
kind: app
version: 0.3.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: 4fad31ae-9252-48b0-948d-39a95e85ed88
    name: key
    selector:
    - env
    - key
    value: mk-xxxxxxxx
    value_type: string
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 500
        batch_count_limit: 10
        file_size_limit: 100
        image_file_size_limit: 100
        video_file_size_limit: 500
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1753787179392-source-17544110151730-target
      source: '1753787179392'
      sourceHandle: source
      target: '17544110151730'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: 17544110151730-source-1754620296021-target
      source: '17544110151730'
      sourceHandle: source
      target: '1754620296021'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1754620296021-source-1754393041670-target
      source: '1754620296021'
      sourceHandle: source
      target: '1754393041670'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1753787119287-source-1754622942727-target
      source: '1753787119287'
      sourceHandle: source
      target: '1754622942727'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1754622942727-true-1753787179392-target
      source: '1754622942727'
      sourceHandle: 'true'
      target: '1753787179392'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1754622942727-0a92d901-7c99-47cf-8d24-5f4744106007-17546230718560-target
      source: '1754622942727'
      sourceHandle: 0a92d901-7c99-47cf-8d24-5f4744106007
      target: '17546230718560'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 17546230718560-source-1754624654705-target
      source: '17546230718560'
      sourceHandle: source
      target: '1754624654705'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: 1754624654705-source-1754624726617-target
      source: '1754624654705'
      sourceHandle: source
      target: '1754624726617'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1754624726617-source-1754625083596-target
      source: '1754624726617'
      sourceHandle: source
      target: '1754625083596'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1754622942727-36c2b74f-42bc-4ed5-a81c-367d01e549bc-17546252819640-target
      source: '1754622942727'
      sourceHandle: 36c2b74f-42bc-4ed5-a81c-367d01e549bc
      target: '17546252819640'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1754622942727-e9882a46-cbeb-46e3-9d87-43468f71237e-17546253244800-target
      source: '1754622942727'
      sourceHandle: e9882a46-cbeb-46e3-9d87-43468f71237e
      target: '17546253244800'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1754622942727-2a7803b0-61f3-4c62-b3ce-e5c56a695a6b-17546253440350-target
      source: '1754622942727'
      sourceHandle: 2a7803b0-61f3-4c62-b3ce-e5c56a695a6b
      target: '17546253440350'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1754622942727-15e66a86-77e4-4e57-a16d-aa6e9b40d571-17546253491010-target
      source: '1754622942727'
      sourceHandle: 15e66a86-77e4-4e57-a16d-aa6e9b40d571
      target: '17546253491010'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1754622942727-false-1753787179392-target
      source: '1754622942727'
      sourceHandle: 'false'
      target: '1753787179392'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 17546252819640-source-17546268421970-target
      source: '17546252819640'
      sourceHandle: source
      target: '17546268421970'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: code
      id: 17546268421970-source-17546269080300-target
      source: '17546268421970'
      sourceHandle: source
      target: '17546269080300'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 17546269080300-source-1754640497461-target
      source: '17546269080300'
      sourceHandle: source
      target: '1754640497461'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 17546253244800-source-1754640516327-target
      source: '17546253244800'
      sourceHandle: source
      target: '1754640516327'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: 1754640516327-source-1754641206148-target
      source: '1754640516327'
      sourceHandle: source
      target: '1754641206148'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1754641206148-source-1754641782445-target
      source: '1754641206148'
      sourceHandle: source
      target: '1754641782445'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 17546253440350-source-1754642078212-target
      source: '17546253440350'
      sourceHandle: source
      target: '1754642078212'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: 1754642078212-source-1754642999884-target
      source: '1754642078212'
      sourceHandle: source
      target: '1754642999884'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 17546253491010-source-1754643102235-target
      source: '17546253491010'
      sourceHandle: source
      target: '1754643102235'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: code
      id: 1754643102235-source-1754643106088-target
      source: '1754643102235'
      sourceHandle: source
      target: '1754643106088'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1754642999884-source-1754644020839-target
      source: '1754642999884'
      sourceHandle: source
      target: '1754644020839'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1754643106088-source-1754646053648-target
      source: '1754643106088'
      sourceHandle: source
      target: '1754646053648'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: æŸ¥è¯¢
          max_length: 99999999
          options: []
          required: true
          type: paragraph
          variable: q
        - label: æœç´¢èŒƒå›´
          max_length: 99999
          options:
          - webpage
          - document
          - scholar
          - image
          - video
          - podcast
          required: true
          type: select
          variable: scope
        - label: ç»“æœæ•°é‡
          max_length: 48
          options:
          - '10'
          - '20'
          - '30'
          - '40'
          - '50'
          required: true
          type: select
          variable: size
        - label: é¡µç 
          max_length: 48
          options:
          - '1'
          - '2'
          - '3'
          - '4'
          - '5'
          - '6'
          - '7'
          - '8'
          - '9'
          - '10'
          required: false
          type: select
          variable: page
        - label: è¿”å›ç²¾ç®€çš„åŸæ–‡åŒ¹é…ä¿¡æ¯
          max_length: 48
          options:
          - 'false'
          - 'true'
          required: true
          type: select
          variable: includeSummary
        - label: é€šè¿‡ç½‘é¡µçš„æ‘˜è¦ä¿¡æ¯è¿›è¡Œå¬å›å¢å¼º
          max_length: 48
          options:
          - 'false'
          - 'true'
          required: true
          type: select
          variable: includeRawContent
        - label: æŠ“å–æ‰€æœ‰æ¥æºç½‘é¡µåŸæ–‡
          max_length: 48
          options:
          - 'false'
          - 'true'
          required: true
          type: select
          variable: conciseSnippet
      height: 244
      id: '1753787119287'
      position:
        x: -1969.2948883631834
        y: -2266.674718080848
      positionAbsolute:
        x: -1969.2948883631834
        y: -2266.674718080848
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config:
            api_key: mk-8C6A988ED61CAD222F8D1010724C5186
            type: basic
          type: no-auth
        body:
          data:
          - id: key-value-1948
            key: ''
            type: text
            value: "{\n  \"q\": \"{{#1753787119287.q#}}\",\n  \"scope\": \"{{#1753787119287.scope#}}\"\
              ,\n  \"includeSummary\": {{#1753787119287.includeSummary#}},\n  \"size\"\
              : \"{{#1753787119287.size#}}\",\n  \"includeRawContent\":{{#1753787119287.includeRawContent#}},\n\
              \  \"conciseSnippet\": {{#1753787119287.conciseSnippet#}}\n}"
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#env.key#}}

          Accept:application/json

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 10
          retry_enabled: true
          retry_interval: '1000'
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: webæœç´¢
        type: http-request
        url: https://metaso.cn/api/v1/search
        variables: []
      height: 138
      id: '1753787179392'
      position:
        x: -1043.4827699419955
        y: -2363.6914822273084
      positionAbsolute:
        x: -1043.4827699419955
        y: -2363.6914822273084
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1754620296021'
          - markdown
          variable: result
        selected: false
        title: webæœç´¢ç»“æœ
        type: end
      height: 88
      id: '1754393041670'
      position:
        x: -161.26152365425855
        y: -2370.0817286592164
      positionAbsolute:
        x: -161.26152365425855
        y: -2370.0817286592164
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(body: str) -> dict:\n    \"\"\"è§£æAPIå“åº”ä½“ï¼Œæå–æ‰€éœ€å­—æ®µï¼ˆåŒ…å«é“¾æ¥ï¼‰\"\
          \"\"\n    # è§£æJSONå“åº”\n    parsed = json.loads(body)\n    \n    # æ„å»ºå†…å®¹å­—å…¸\n\
          \    content = {\n        \"q\": parsed[\"searchParameters\"][\"q\"],\n\
          \        \"total\": parsed[\"total\"],\n        \"webpages\": []\n    }\n\
          \    \n    # å¤„ç†æ¯ä¸ªç½‘é¡µ\n    for item in parsed[\"webpages\"]:\n        page\
          \ = {\n            \"title\": item[\"title\"],\n            \"link\": item[\"\
          link\"],  # æ·»åŠ é“¾æ¥å­—æ®µ\n            \"snippet\": item[\"snippet\"],\n      \
          \      \"position\": item[\"position\"],\n            \"date\": item[\"\
          date\"],\n            \"authors\": item.get(\"authors\", [])  # å®‰å…¨å¤„ç†ç¼ºå¤±çš„å­—æ®µ\n\
          \        }\n        content[\"webpages\"].append(page)\n    \n    # å°†è¾“å‡ºå˜é‡åæ”¹ä¸º\
          \ input_data\n    return {\"input_data\": content}"
        code_language: python3
        desc: ''
        outputs:
          input_data:
            children: null
            type: object
        selected: false
        title: ç»“æœè§£æ
        type: code
        variables:
        - value_selector:
          - '1753787179392'
          - body
          variable: body
      height: 52
      id: '17544110151730'
      position:
        x: -740.424934191988
        y: -2363.6914822273084
      positionAbsolute:
        x: -740.424934191988
        y: -2363.6914822273084
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(input_data):\n    # æ£€æŸ¥æœ‰æ•ˆæ•°æ®æ˜¯å¦å­˜åœ¨ï¼ˆç›´æ¥æ£€æŸ¥input_dataä¸­çš„å…³é”®å­—æ®µï¼‰\n\
          \    if not input_data or not input_data.get(\"webpages\"):\n        return\
          \ {\"markdown\": \"## æœªæ‰¾åˆ°æœ‰æ•ˆæ•°æ®\"}\n    \n    # ç›´æ¥ä½¿ç”¨input_dataä½œä¸ºæ•°æ®æº\n    data\
          \ = input_data\n    markdown = f\"## æœç´¢ç»“æœï¼š{data['q']}\\n\\n\"\n    markdown\
          \ += f\"æ‰¾åˆ° **{data['total']}** æ¡ç›¸å…³ç»“æœ\\n\\n---\\n\\n\"\n    \n    # å¤„ç†æ¯ä¸ªæœç´¢ç»“æœé¡¹\n\
          \    for item in data[\"webpages\"]:\n        markdown += f\"### [{item['title']}]({item['link']})\\\
          n\"\n        markdown += f\"- **æ—¥æœŸ**: {item['date']}\\n\"\n        \n  \
          \      if item.get(\"authors\"):\n            markdown += f\"- **ä½œè€…**: {',\
          \ '.join(item['authors'])}\\n\"\n        \n        # æ¸…ç†æ‘˜è¦å¹¶æˆªæ–­\n        snippet\
          \ = item['snippet'].replace('\\n', ' ').replace('![]', '')\n        markdown\
          \ += f\"- **æ‘˜è¦**: {snippet[:240]}{'...' if len(snippet) > 240 else ''}\\\
          n\\n\"\n    \n    return {\"markdown\": markdown}"
        code_language: python3
        desc: ''
        outputs:
          markdown:
            children: null
            type: string
        selected: false
        title: josnè½¬md
        type: code
        variables:
        - value_selector:
          - '17544110151730'
          - input_data
          variable: input_data
      height: 52
      id: '1754620296021'
      position:
        x: -448.6412957816585
        y: -2370.0817286592164
      positionAbsolute:
        x: -448.6412957816585
        y: -2370.0817286592164
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: cabe017f-4efa-4226-bcea-b3d028803928
            value: webpage
            varType: string
            variable_selector:
            - '1753787119287'
            - scope
          id: 'true'
          logical_operator: and
        - case_id: 0a92d901-7c99-47cf-8d24-5f4744106007
          conditions:
          - comparison_operator: is
            id: e7bdd788-8909-4c39-b7d0-c9abce2aa144
            value: document
            varType: string
            variable_selector:
            - '1753787119287'
            - scope
          id: 0a92d901-7c99-47cf-8d24-5f4744106007
          logical_operator: and
        - case_id: 36c2b74f-42bc-4ed5-a81c-367d01e549bc
          conditions:
          - comparison_operator: is
            id: 1a265767-00ef-471c-b19e-deb0237261d0
            value: scholar
            varType: string
            variable_selector:
            - '1753787119287'
            - scope
          id: 36c2b74f-42bc-4ed5-a81c-367d01e549bc
          logical_operator: and
        - case_id: e9882a46-cbeb-46e3-9d87-43468f71237e
          conditions:
          - comparison_operator: is
            id: e3508cd4-f433-43e7-a5e2-9ae33ea0e2d6
            value: image
            varType: string
            variable_selector:
            - '1753787119287'
            - scope
          id: e9882a46-cbeb-46e3-9d87-43468f71237e
          logical_operator: and
        - case_id: 2a7803b0-61f3-4c62-b3ce-e5c56a695a6b
          conditions:
          - comparison_operator: is
            id: 3d57bda2-8017-423a-8c1e-95b6b1525904
            value: video
            varType: string
            variable_selector:
            - '1753787119287'
            - scope
          id: 2a7803b0-61f3-4c62-b3ce-e5c56a695a6b
          logical_operator: and
        - case_id: 15e66a86-77e4-4e57-a16d-aa6e9b40d571
          conditions:
          - comparison_operator: is
            id: fb95f3a4-21c7-4d94-8a9b-e078b6b1a75f
            value: podcast
            varType: string
            variable_selector:
            - '1753787119287'
            - scope
          id: 15e66a86-77e4-4e57-a16d-aa6e9b40d571
          logical_operator: and
        desc: ''
        selected: false
        title: æ¡ä»¶åˆ†æ”¯
        type: if-else
      height: 364
      id: '1754622942727'
      position:
        x: -1482.1593731284768
        y: -2266.674718080848
      positionAbsolute:
        x: -1482.1593731284768
        y: -2266.674718080848
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config:
            api_key: mk-8C6A988ED61CAD222F8D1010724C5186
            type: basic
          type: no-auth
        body:
          data:
          - id: key-value-1948
            key: ''
            type: text
            value: "{\n  \"q\": \"{{#1753787119287.q#}}\",\n  \"scope\": \"{{#1753787119287.scope#}}\"\
              ,\n  \"includeSummary\": {{#1753787119287.includeSummary#}},\n  \"size\"\
              : \"{{#1753787119287.size#}}\",\n  \"includeRawContent\":{{#1753787119287.includeRawContent#}},\n\
              \  \"conciseSnippet\": {{#1753787119287.conciseSnippet#}}\n}"
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#env.key#}}

          Accept:application/json

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 10
          retry_enabled: true
          retry_interval: '1000'
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: æ–‡åº“æœç´¢
        type: http-request
        url: https://metaso.cn/api/v1/search
        variables: []
      height: 138
      id: '17546230718560'
      position:
        x: -1043.4827699419955
        y: -2188.7128052106555
      positionAbsolute:
        x: -1043.4827699419955
        y: -2188.7128052106555
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(body: str) -> dict:\n    \"\"\"è§£æJSONè¾“å…¥ï¼Œæå–æŒ‡å®šå­—æ®µï¼ˆè¾“å…¥å˜é‡ï¼šbodyï¼Œè¾“å‡ºå˜é‡ï¼šinput_dataï¼‰\"\
          \"\"\n    try:\n        # è§£æè¾“å…¥JSONå­—ç¬¦ä¸²\n        data = json.loads(body)\n\
          \        \n        # æå–æœç´¢å…³é”®è¯ï¼ˆqï¼‰\n        q_value = data.get(\"searchParameters\"\
          , {}).get(\"q\", \"\")\n        \n        # æå–æ–‡æ¡£åˆ—è¡¨\n        documents_list\
          \ = []\n        for doc in data.get(\"documents\", []):\n            doc_info\
          \ = {\n                \"title\": doc.get(\"title\", \"\"),\n          \
          \      \"link\": doc.get(\"link\", \"\"),\n                \"score\": doc.get(\"\
          score\", \"\"),\n                \"snippet\": doc.get(\"snippet\", \"\"\
          ),\n                \"position\": doc.get(\"position\", \"\"),\n       \
          \         \"authors\": doc.get(\"authors\", [])  # å®‰å…¨è·å–ä½œè€…åˆ—è¡¨\n          \
          \  }\n            documents_list.append(doc_info)\n        \n        # æ„å»ºè¾“å‡ºç»“æ„\n\
          \        result = {\n            \"q\": q_value,\n            \"documents\"\
          : documents_list,\n            \"total\": data.get(\"total\", 0)\n     \
          \   }\n        \n        # è¿”å›æŒ‡å®šè¾“å‡ºå˜é‡å\n        return {\"input_data\": result}\n\
          \    \n    except Exception as e:\n        return {\n            \"error\"\
          : f\"JSONè§£æå¤±è´¥: {str(e)}\",\n            \"input_data\": None\n        }"
        code_language: python3
        desc: ''
        outputs:
          input_data:
            children: null
            type: object
        selected: false
        title: ç»“æœè§£æ
        type: code
        variables:
        - value_selector:
          - '17546230718560'
          - body
          variable: body
      height: 52
      id: '1754624654705'
      position:
        x: -740.424934191988
        y: -2188.7128052106555
      positionAbsolute:
        x: -740.424934191988
        y: -2188.7128052106555
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(input_data):\n    # æå–æŸ¥è¯¢è¯å’Œæ–‡æ¡£åˆ—è¡¨\n    query =\
          \ input_data[\"q\"]\n    total = input_data[\"total\"]\n    documents =\
          \ input_data[\"documents\"]\n    \n    # æ„å»ºMarkdownå¤´éƒ¨\n    markdown = f\"\
          ## æœç´¢ç»“æœï¼š{query}\\n\\n\"\n    markdown += f\"æ‰¾åˆ° **{total}** æ¡ç›¸å…³ç»“æœ\\n\\n---\\\
          n\\n\"\n    \n    # å¤„ç†æ¯ä¸ªæœç´¢ç»“æœ\n    for doc in documents:\n        markdown\
          \ += f\"### {doc['position']}. [{doc['title']}]({doc['link']})\\n\"\n  \
          \      \n        if doc.get(\"authors\"):\n            markdown += f\"-\
          \ **ä½œè€…**: {', '.join(doc['authors'])}\\n\"\n        \n        # æ¸…ç†æ‘˜è¦å¹¶æˆªæ–­\n\
          \        snippet = doc['snippet']\n        # ç§»é™¤å›¾ç‰‡æ ‡è®°\n        snippet = snippet.replace('![]',\
          \ '').replace('![](', '')\n        # ç§»é™¤ç‰¹æ®Šå­—ç¬¦å’Œå¤šä½™ç©ºæ ¼\n        snippet = ' '.join(snippet.split())\n\
          \        # æˆªæ–­æ‘˜è¦\n        markdown += f\"- **æ‘˜è¦**: {snippet[:220]}{'...'\
          \ if len(snippet) > 220 else ''}\\n\\n\"\n    \n    return {\"markdown\"\
          : markdown}\n\n# ç¤ºä¾‹è°ƒç”¨ï¼ˆå®é™…åœ¨å·¥ä½œæµä¸­ä¼šè‡ªåŠ¨ä¼ å…¥input_dataï¼‰\nif __name__ == \"__main__\"\
          :\n    # è¿™é‡Œä»…ç”¨äºæœ¬åœ°æµ‹è¯•ï¼Œåœ¨å·¥ä½œæµä¸­ä¼šè¢«è¦†ç›–\n    test_data = {\n        \"input_data\"\
          : {\n            \"q\": \"æµ‹è¯•æŸ¥è¯¢\",\n            \"documents\": [{\n     \
          \           \"title\": \"æµ‹è¯•æ ‡é¢˜\",\n                \"link\": \"https://example.com\"\
          ,\n                \"snippet\": \"æµ‹è¯•æ‘˜è¦å†…å®¹\",\n                \"position\"\
          : 1,\n                \"authors\": [\"æµ‹è¯•ä½œè€…\"]\n            }],\n       \
          \     \"total\": 1\n        }\n    }\n    result = main(test_data[\"input_data\"\
          ])\n    print(result[\"markdown\"])"
        code_language: python3
        desc: ''
        outputs:
          markdown:
            children: null
            type: string
        selected: false
        title: josnè½¬md
        type: code
        variables:
        - value_selector:
          - '1754624654705'
          - input_data
          variable: input_data
      height: 52
      id: '1754624726617'
      position:
        x: -448.6412957816585
        y: -2180.994730037335
      positionAbsolute:
        x: -448.6412957816585
        y: -2180.994730037335
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1754624726617'
          - markdown
          variable: markdown
        selected: false
        title: æ–‡åº“æœç´¢ç»“æœ
        type: end
      height: 88
      id: '1754625083596'
      position:
        x: -153.8062361503661
        y: -2180.994730037335
      positionAbsolute:
        x: -153.8062361503661
        y: -2180.994730037335
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config:
            api_key: mk-8C6A988ED61CAD222F8D1010724C5186
            type: basic
          type: no-auth
        body:
          data:
          - id: key-value-1948
            key: ''
            type: text
            value: "{\n  \"q\": \"{{#1753787119287.q#}}\",\n  \"scope\": \"{{#1753787119287.scope#}}\"\
              ,\n  \"includeSummary\": {{#1753787119287.includeSummary#}},\n  \"size\"\
              : \"{{#1753787119287.size#}}\",\n  \"includeRawContent\":{{#1753787119287.includeRawContent#}},\n\
              \  \"conciseSnippet\": {{#1753787119287.conciseSnippet#}}\n}"
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#env.key#}}

          Accept:application/json

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 10
          retry_enabled: true
          retry_interval: '1000'
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: å­¦æœ¯æœç´¢
        type: http-request
        url: https://metaso.cn/api/v1/search
        variables: []
      height: 138
      id: '17546252819640'
      position:
        x: -1043.4827699419955
        y: -2021.559387481035
      positionAbsolute:
        x: -1043.4827699419955
        y: -2021.559387481035
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config:
            api_key: mk-8C6A988ED61CAD222F8D1010724C5186
            type: basic
          type: no-auth
        body:
          data:
          - id: key-value-1948
            key: ''
            type: text
            value: "{\n  \"q\": \"{{#1753787119287.q#}}\",\n  \"scope\": \"{{#1753787119287.scope#}}\"\
              ,\n  \"includeSummary\": {{#1753787119287.includeSummary#}},\n  \"size\"\
              : \"{{#1753787119287.size#}}\",\n  \"includeRawContent\":{{#1753787119287.includeRawContent#}},\n\
              \  \"conciseSnippet\": {{#1753787119287.conciseSnippet#}}\n}"
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#env.key#}}

          Accept:application/json

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 10
          retry_enabled: true
          retry_interval: '1000'
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: å›¾ç‰‡æœç´¢
        type: http-request
        url: https://metaso.cn/api/v1/search
        variables: []
      height: 138
      id: '17546253244800'
      position:
        x: -1043.4827699419955
        y: -1853.3458238072835
      positionAbsolute:
        x: -1043.4827699419955
        y: -1853.3458238072835
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config:
            api_key: mk-8C6A988ED61CAD222F8D1010724C5186
            type: basic
          type: no-auth
        body:
          data:
          - id: key-value-1948
            key: ''
            type: text
            value: "{\n  \"q\": \"{{#1753787119287.q#}}\",\n  \"scope\": \"{{#1753787119287.scope#}}\"\
              ,\n  \"includeSummary\": {{#1753787119287.includeSummary#}},\n  \"size\"\
              : \"{{#1753787119287.size#}}\",\n  \"includeRawContent\":{{#1753787119287.includeRawContent#}},\n\
              \  \"conciseSnippet\": {{#1753787119287.conciseSnippet#}}\n}"
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#env.key#}}

          Accept:application/json

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 10
          retry_enabled: true
          retry_interval: '1000'
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: è§†é¢‘æœç´¢
        type: http-request
        url: https://metaso.cn/api/v1/search
        variables: []
      height: 138
      id: '17546253440350'
      position:
        x: -1043.4827699419955
        y: -1693.41666008938
      positionAbsolute:
        x: -1043.4827699419955
        y: -1693.41666008938
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config:
            api_key: mk-8C6A988ED61CAD222F8D1010724C5186
            type: basic
          type: no-auth
        body:
          data:
          - id: key-value-1948
            key: ''
            type: text
            value: "{\n  \"q\": \"{{#1753787119287.q#}}\",\n  \"scope\": \"{{#1753787119287.scope#}}\"\
              ,\n  \"includeSummary\": {{#1753787119287.includeSummary#}},\n  \"size\"\
              : \"{{#1753787119287.size#}}\",\n  \"includeRawContent\":{{#1753787119287.includeRawContent#}},\n\
              \  \"conciseSnippet\": {{#1753787119287.conciseSnippet#}}\n}"
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#env.key#}}

          Accept:application/json

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 10
          retry_enabled: true
          retry_interval: '1000'
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: åšå®¢æœç´¢
        type: http-request
        url: https://metaso.cn/api/v1/search
        variables: []
      height: 138
      id: '17546253491010'
      position:
        x: -1043.4827699419955
        y: -1514.2286015845405
      positionAbsolute:
        x: -1043.4827699419955
        y: -1514.2286015845405
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(body: str) -> dict:\n    \"\"\"è§£æ JSON è¾“å…¥ï¼Œæå–æŒ‡å®šå­—æ®µï¼ˆè¾“å…¥å˜é‡ï¼šbodyï¼Œè¾“å‡ºå˜é‡ï¼šinput_dataï¼‰\"\
          \"\"\n    try:\n        data = json.loads(body)\n        \n        # å®‰å…¨æå–æœç´¢å‚æ•°ï¼ˆå¤šå±‚åµŒå¥—é¿å…\
          \ KeyErrorï¼‰\n        search_params = data.get(\"searchParameters\", {})\n\
          \        q_value = search_params.get(\"q\", \"\")\n        \n        # å¤„ç†æ–‡æ¡£åˆ—è¡¨ï¼ˆå«ç©ºå€¼ä¿æŠ¤å’Œç±»å‹è½¬æ¢ï¼‰\n\
          \        documents_list = []\n        for doc in data.get(\"scholars\",\
          \ []):  # æ³¨æ„å­—æ®µåéœ€ä¸å®é™…åŒ¹é…\n            # ç»Ÿä¸€å¤„ç†ç¼ºå¤±å­—æ®µï¼Œé¿å…åç»­æµç¨‹ä¸­æ–­\n            doc_info\
          \ = {\n                \"title\": doc.get(\"title\", \"æ— æ ‡é¢˜\"),\n       \
          \         \"link\": doc.get(\"link\", \"#\"),\n                \"score\"\
          : str(doc.get(\"score\", \"N/A\")),  # ç¡®ä¿å­—ç¬¦ä¸²ç±»å‹\n                \"position\"\
          : int(doc.get(\"position\", 0)),  # è½¬æ¢ä¸ºæ•°å€¼\n                \"date\": doc.get(\"\
          date\", \"\"),\n                \"authors\": doc.get(\"authors\", []), \
          \ # é»˜è®¤ç©ºåˆ—è¡¨\n                \"snippet\": doc.get(\"snippet\", \"\")[:500]\
          \  # æˆªæ–­é•¿æ–‡æœ¬\n            }\n            documents_list.append(doc_info)\n\
          \        \n        # æ„å»ºç»“æ„åŒ–è¾“å‡ºï¼ˆå…¼å®¹å¼‚å¸¸åˆ†æ”¯ï¼‰\n        return {\n            \"input_data\"\
          : {  # è¾“å‡ºå˜é‡åå¿…é¡»ä¸å·¥ä½œæµå®šä¹‰ä¸€è‡´\n                \"q\": q_value,\n              \
          \  \"documents\": documents_list,\n                \"total\": int(data.get(\"\
          total\", 0))  # ç±»å‹è½¬æ¢\n            }\n        }\n    \n    except json.JSONDecodeError\
          \ as e:\n        return {\"error\": f\"JSON æ ¼å¼é”™è¯¯: {str(e)}\"}\n    except\
          \ KeyError as e:\n        return {\"error\": f\"ç¼ºå¤±å…³é”®å­—æ®µ: {str(e)}\"}\n  \
          \  except Exception as e:\n        return {\"error\": f\"è§£æå¤±è´¥: {str(e)}\"\
          }"
        code_language: python3
        desc: ''
        outputs:
          input_data:
            children: null
            type: object
        selected: false
        title: ç»“æœè§£æ
        type: code
        variables:
        - value_selector:
          - '17546230718560'
          - body
          variable: body
      height: 52
      id: '17546268421970'
      position:
        x: -746.9582289732159
        y: -2015.9061946143147
      positionAbsolute:
        x: -746.9582289732159
        y: -2015.9061946143147
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import logging\n\n# é…ç½®æ—¥å¿—\nlogging.basicConfig(level=logging.INFO)\n\
          logger = logging.getLogger(__name__)\n\ndef main(input_data):\n    # 1.\
          \ éªŒè¯è¾“å…¥æ•°æ®æ˜¯å¦å­˜åœ¨\n    if not input_data:\n        logger.error(\"è¾“å…¥æ•°æ®ä¸ºç©ºï¼\")\n\
          \        input_data = {\"q\": \"é»˜è®¤æœç´¢è¯\", \"documents\": []}  # æä¾›é»˜è®¤æ•°æ®\n\
          \    \n    # 2. æå–å¿…è¦å­—æ®µï¼ˆå¸¦é»˜è®¤å€¼ï¼‰\n    query = input_data.get(\"q\", \"\")\n\
          \    documents = input_data.get(\"documents\", [])\n    \n    # 3. å¤„ç†é€»è¾‘ï¼ˆç¤ºä¾‹ï¼šç”Ÿæˆ\
          \ Markdown ç»“æœï¼‰\n    markdown_output = f\"## æœç´¢ç»“æœ\\n- **å…³é”®è¯**: {query}\\\
          n\\n\"\n    for doc in documents:\n        title = doc.get(\"title\", \"\
          æ— æ ‡é¢˜\")\n        link = doc.get(\"link\", \"#\")\n        markdown_output\
          \ += f\"- [{title}]({link})\\n\"\n    \n    return {\"markdown\": markdown_output}\n\
          \n# è°ƒç”¨å…¥å£ï¼ˆDify è‡ªåŠ¨ä¼ å…¥ input_dataï¼‰\nif 'input_data' in locals():\n    result\
          \ = main(input_data)\nelse:\n    result = {\"error\": \"è¾“å…¥æ•°æ®æœªå®šä¹‰\"}"
        code_language: python3
        desc: ''
        outputs:
          markdown:
            children: null
            type: string
        selected: false
        title: josnè½¬md
        type: code
        variables:
        - value_selector:
          - '17546268421970'
          - input_data
          variable: input_data
      height: 52
      id: '17546269080300'
      position:
        x: -436.424934191988
        y: -2021.559387481035
      positionAbsolute:
        x: -436.424934191988
        y: -2021.559387481035
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '17546269080300'
          - markdown
          variable: markdown
        selected: false
        title: å­¦æœ¯æœç´¢ç»“æœ
        type: end
      height: 88
      id: '1754640497461'
      position:
        x: -153.8062361503661
        y: -2026.3917451662537
      positionAbsolute:
        x: -153.8062361503661
        y: -2026.3917451662537
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(body: str) -> dict:\n    \"\"\"è§£æAPIå“åº”ä½“ï¼Œæå–æ‰€éœ€å­—æ®µï¼ˆå«å›¾ç‰‡ä¿¡æ¯ï¼‰\"\
          \"\"\n    # è§£æJSONå“åº”\n    parsed = json.loads(body)\n    \n    # æ„å»ºå†…å®¹å­—å…¸\n\
          \    content = {\n        \"q\": parsed[\"searchParameters\"][\"q\"],\n\
          \        \"total\": parsed[\"total\"],\n        \"images\": []\n    }\n\
          \    \n    # éå†æ¯ä¸ªå›¾ç‰‡æ¡ç›®\n    for image in parsed[\"images\"]:\n        img_data\
          \ = {\n            \"title\": image[\"title\"],\n            \"score\":\
          \ image[\"score\"],\n            \"position\": image[\"position\"],\n  \
          \          \"imageUrl\": image[\"imageUrl\"]\n        }\n        content[\"\
          images\"].append(img_data)\n    \n    # è¿”å›ç»Ÿä¸€å‘½åçš„è¾“å‡ºå˜é‡\n    return {\"input_data\"\
          : content}"
        code_language: python3
        desc: ''
        outputs:
          input_data:
            children: null
            type: object
        selected: false
        title: ç»“æœè§£æ
        type: code
        variables:
        - value_selector:
          - '17546253244800'
          - body
          variable: body
      height: 52
      id: '1754640516327'
      position:
        x: -740.424934191988
        y: -1853.3458238072835
      positionAbsolute:
        x: -740.424934191988
        y: -1853.3458238072835
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(input_data: dict) -> dict:\n    \"\"\"å°†å›¾ç‰‡æœç´¢ç»“æœJSONè½¬æ¢ä¸ºMarkdownæ ¼å¼\"\
          \"\"\n    # æ£€æŸ¥æœ‰æ•ˆæ•°æ®æ˜¯å¦å­˜åœ¨\n    if not input_data or not input_data.get(\"images\"\
          ):\n        return {\"markdown\": \"## æœªæ‰¾åˆ°æœ‰æ•ˆå›¾ç‰‡æ•°æ®\"}\n    \n    # æå–æ ¸å¿ƒæ•°æ®\n\
          \    q = input_data.get(\"q\", \"æœªçŸ¥æœç´¢\")\n    total = input_data.get(\"\
          total\", 0)\n    images = input_data[\"images\"]\n    \n    # æ„å»ºåŸºç¡€MDç»“æ„\n\
          \    markdown = f\"# \U0001F50D å›¾ç‰‡æœç´¢ç»“æœ: {q}\\n\\n\"\n    markdown += f\"\
          **æ‰¾åˆ° {total} æ¡ç»“æœï¼Œæ˜¾ç¤ºå‰ {len(images)} å¼ å›¾ç‰‡**\\n\\n\"\n    \n    # æ·»åŠ å›¾ç‰‡ä¿¡æ¯è¡¨\n\
          \    markdown += \"## \U0001F4F8 å›¾ç‰‡åˆ—è¡¨\\n\"\n    markdown += \"| ä½ç½® | è¯„åˆ†\
          \ | æ ‡é¢˜ | é¢„è§ˆ |\\n\"\n    markdown += \"|------|------|------|------|\\n\"\
          \n    \n    for img in images:\n        # ç®€åŒ–æ ‡é¢˜ï¼ˆç§»é™¤å¤šä½™ç¬¦å·ï¼‰\n        title =\
          \ img[\"title\"].split('|')[0].split('_')[0].strip()\n        # åˆ›å»ºå›¾ç‰‡é¢„è§ˆï¼ˆé™åˆ¶é«˜åº¦ï¼‰\n\
          \        preview = f\"<img src='{img['imageUrl']}' height=100>\"\n     \
          \   # æ·»åŠ è¡¨æ ¼è¡Œ\n        markdown += f\"| {img['position']} | {img['score']}\
          \ | {title} | {preview} |\\n\"\n    \n    return {\"markdown\": markdown}"
        code_language: python3
        desc: ''
        outputs:
          markdown:
            children: null
            type: string
        selected: false
        title: josnè½¬md
        type: code
        variables:
        - value_selector:
          - '1754640516327'
          - input_data
          variable: input_data
      height: 52
      id: '1754641206148'
      position:
        x: -436.424934191988
        y: -1853.3458238072835
      positionAbsolute:
        x: -436.424934191988
        y: -1853.3458238072835
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1754641206148'
          - markdown
          variable: markdown
        selected: false
        title: å›¾ç‰‡æœç´¢ç»“æœ
        type: end
      height: 88
      id: '1754641782445'
      position:
        x: -153.8062361503661
        y: -1859.386270913807
      positionAbsolute:
        x: -153.8062361503661
        y: -1859.386270913807
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(body: str) -> dict:\n    \"\"\"\n    è§£æè§†é¢‘æœç´¢ç»“æœJSONï¼Œæå–ç»“æ„åŒ–å­—æ®µ\n\
          \    è¾“å…¥: åŒ…å«è§†é¢‘æœç´¢ç»“æœçš„JSONå­—ç¬¦ä¸²\n    è¾“å‡º: åŒ…å«qå’Œvideosåˆ—è¡¨çš„å­—å…¸\n    \"\"\"\n    # è§£æJSONå“åº”\n\
          \    data = json.loads(body)\n    \n    # æ„å»ºç»“æœå­—å…¸\n    result = {\n     \
          \   \"q\": data[\"searchParameters\"][\"q\"],  # æå–æœç´¢å…³é”®è¯\n        \"videos\"\
          : []  # ç”¨äºå­˜å‚¨è§†é¢‘ä¿¡æ¯çš„åˆ—è¡¨\n    }\n    \n    # éå†æ¯ä¸ªè§†é¢‘æ¡ç›®\n    for video in data[\"\
          videos\"]:\n        # æå–æŒ‡å®šå­—æ®µ\n        video_data = {\n            \"position\"\
          : video[\"position\"],\n            \"title\": video[\"title\"],\n     \
          \       \"link\": video[\"link\"],\n            \"score\": video[\"score\"\
          ],\n            \"snippet\": video[\"snippet\"],\n            \"authors\"\
          : video[\"authors\"],\n            \"date\": video[\"date\"],\n        \
          \    \"duration\": video[\"duration\"],\n            \"coverImage\": video[\"\
          coverImage\"]\n        }\n        result[\"videos\"].append(video_data)\n\
          \    \n    # è¿”å›å˜é‡åä¸º input_data çš„è¾“å‡º\n    return {\"input_data\": result}\
          \  # å·²ä¿®æ”¹å˜é‡å"
        code_language: python3
        desc: ''
        outputs:
          input_data:
            children: null
            type: object
        selected: false
        title: ç»“æœè§£æ
        type: code
        variables:
        - value_selector:
          - '17546253440350'
          - body
          variable: body
      height: 52
      id: '1754642078212'
      position:
        x: -740.424934191988
        y: -1693.41666008938
      positionAbsolute:
        x: -740.424934191988
        y: -1693.41666008938
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(input_data: dict) -> dict:\n    \"\"\"\n  \
          \  å°†è§†é¢‘æœç´¢ç»“æœJSONè½¬æ¢ä¸ºéè¡¨æ ¼Markdownæ ¼å¼\n    è¾“å…¥: åŒ…å«è§†é¢‘æœç´¢ç»“æœçš„å­—å…¸å¯¹è±¡\n    è¾“å‡º: Markdownæ ¼å¼çš„å†…å®¹ï¼ˆå˜é‡åï¼šmarkdownï¼‰\n\
          \    \"\"\"\n    # ç›´æ¥ä½¿ç”¨ input_data å­—å…¸\n    videos = input_data[\"videos\"\
          ]\n    \n    # æ„å»ºMarkdownå†…å®¹\n    md_content = f\"## \U0001F50D æœç´¢è¯: {input_data['q']}\\\
          n\\n\"\n    \n    # éå†æ¯ä¸ªè§†é¢‘æ¡ç›®\n    for video in videos:\n        # å¤„ç†ä½œè€…ä¿¡æ¯\n\
          \        author = video[\"authors\"][0] if video[\"authors\"] else \"æœªçŸ¥\"\
          \n        \n        # å¤„ç†æ‘˜è¦ï¼ˆæˆªå–å‰50å­—ç¬¦ï¼‰\n        snippet = video[\"snippet\"\
          ].replace(\"\\n\", \" \").strip()\n        snippet_short = snippet[:50]\
          \ + \"...\" if len(snippet) > 50 else snippet\n        \n        # æ·»åŠ è§†é¢‘æ¡ç›®\n\
          \        md_content += f\"### \U0001F4FA {video['position']}. [{video['title']}]({video['link']})\\\
          n\"\n        md_content += f\"- **ä½œè€…**: {author}\\n\"\n        md_content\
          \ += f\"- **å‘å¸ƒæ—¥æœŸ**: {video['date']}\\n\"\n        md_content += f\"- **è§†é¢‘æ—¶é•¿**:\
          \ {video['duration']}ç§’\\n\"\n        md_content += f\"- **æ‘˜è¦**: {snippet_short}\\\
          n\"\n        md_content += f\"- **å°é¢**: [æŸ¥çœ‹å›¾ç‰‡]({video['coverImage']})\\\
          n\\n\"\n    \n    # è¿”å›Markdownç»“æœ\n    return {\"markdown\": md_content}"
        code_language: python3
        desc: ''
        outputs:
          markdown:
            children: null
            type: string
        selected: false
        title: josnè½¬md
        type: code
        variables:
        - value_selector:
          - '1754642078212'
          - input_data
          variable: input_data
      height: 52
      id: '1754642999884'
      position:
        x: -436.424934191988
        y: -1693.41666008938
      positionAbsolute:
        x: -436.424934191988
        y: -1693.41666008938
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(body: str) -> dict:\n    \"\"\"\n    è§£æDifyå·¥ä½œæµä¸­çš„JSONå“åº”ï¼Œæå–æŒ‡å®šå­—æ®µ\n\
          \    åŒ…å«é”™è¯¯å¤„ç†å’Œå­—æ®µç¼ºå¤±çš„é»˜è®¤å€¼è®¾ç½®\n    \"\"\"\n    try:\n        # è§£æJSONå“åº”ä¸»ä½“\n   \
          \     parsed = json.loads(body)\n        \n        # æå–é¡¶å±‚å­—æ®µï¼ˆå«é”™è¯¯å¤„ç†ï¼‰\n   \
          \     input_data = {\n            \"q\": parsed.get(\"searchParameters\"\
          , {}).get(\"q\", \"\"),\n            \"total\": parsed.get(\"total\", 0),\n\
          \            \"podcasts\": []\n        }\n        \n        # éå†æ¯ä¸ªæ’­å®¢æ¡ç›®\n\
          \        for podcast in parsed.get(\"podcasts\", []):\n            podcast_data\
          \ = {\n                \"title\": podcast.get(\"title\", \"\"),\n      \
          \          \"link\": podcast.get(\"link\", \"\"),\n                \"score\"\
          : podcast.get(\"score\", \"medium\"),  # é»˜è®¤mediumè¯„åˆ†\n                \"\
          snippet\": podcast.get(\"snippet\", \"\"),\n                \"position\"\
          : podcast.get(\"position\", 0),\n                \"authors\": podcast.get(\"\
          authors\", []),    # ä½œè€…æ˜¯æ•°ç»„\n                \"date\": podcast.get(\"date\"\
          , \"\"),\n                \"duration\": podcast.get(\"duration\", \"0\"\
          ),\n                # coverImageå¯èƒ½ä¸å­˜åœ¨ï¼Œæä¾›é»˜è®¤ç©ºå€¼\n                \"coverImage\"\
          : podcast.get(\"coverImage\", \"\")  \n            }\n            input_data[\"\
          podcasts\"].append(podcast_data)\n        \n        # è¿”å›ç»Ÿä¸€å‘½åçš„è¾“å‡ºå˜é‡\n    \
          \    return {\"input_data\": input_data}\n    \n    except json.JSONDecodeError:\n\
          \        # JSONè§£æå¤±è´¥æ—¶è¿”å›é”™è¯¯ä¿¡æ¯\n        return {\"input_data\": {\"error\":\
          \ \"Invalid JSON format\"}}\n    except Exception as e:\n        # é€šç”¨é”™è¯¯å¤„ç†\n\
          \        return {\"input_data\": {\"error\": f\"Processing error: {str(e)}\"\
          }}"
        code_language: python3
        desc: ''
        outputs:
          input_data:
            children: null
            type: object
        selected: false
        title: ç»“æœè§£æ
        type: code
        variables:
        - value_selector:
          - '17546253491010'
          - body
          variable: body
      height: 52
      id: '1754643102235'
      position:
        x: -740.424934191988
        y: -1514.2286015845405
      positionAbsolute:
        x: -740.424934191988
        y: -1514.2286015845405
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import json\n\ndef main(input_data: dict) -> dict:\n    \"\"\"\n  \
          \  ä¿®å¤ç‰ˆï¼šå…¼å®¹åµŒå¥—/éåµŒå¥—è¾“å…¥ï¼Œå¼ºåˆ¶å®Œæ•´è¾“å‡º\n    è¾“å…¥: å«videos/podcastså­—æ®µçš„å­—å…¸ï¼ˆæ”¯æŒä¸¤ç§ç»“æ„ï¼‰\n    è¾“å‡º:\
          \ å®Œæ•´Markdownå†…å®¹ï¼ˆå¼ºåˆ¶åŒ…å«markdowné”®ï¼‰\n    \"\"\"\n    try:\n        # å…¼å®¹ä¸¤ç§è¾“å…¥ç»“æ„\n\
          \        data = input_data.get(\"input_data\", input_data)  # é€‚é…åµŒå¥—æˆ–éåµŒå¥—\n\
          \        query = data.get(\"q\", \"æœªçŸ¥æœç´¢è¯\")\n        items = data.get(\"\
          videos\", data.get(\"podcasts\", []))  # å…¼å®¹videos/podcastså­—æ®µ\n        \n\
          \        # æ„å»ºåŸºç¡€Markdown\n        md_content = f\"## \U0001F50D æœç´¢è¯: {query}\\\
          n\\n\"\n        \n        # å¤„ç†æ¡ç›®ï¼ˆé˜²å¾¡æ€§ç¼–ç¨‹ï¼‰\n        for item in items:\n  \
          \          title = item.get(\"title\", \"æ— æ ‡é¢˜\")\n            link = item.get(\"\
          link\", \"#\")\n            \n            # æ„å»ºæ¡ç›®å†…å®¹\n            md_content\
          \ += f\"### \U0001F4FA {item.get('position', 0)}. [{title}]({link})\\n\"\
          \n            md_content += f\"- **ä½œè€…**: {'ã€'.join(item.get('authors', ['æœªçŸ¥']))}\\\
          n\"\n            md_content += f\"- **æ—¥æœŸ**: {item.get('date', 'æœªçŸ¥')}\\n\"\
          \n            \n            # å¤„ç†å¯èƒ½ç¼ºå¤±çš„å­—æ®µ\n            if \"duration\" in\
          \ item:\n                md_content += f\"- **æ—¶é•¿**: {item['duration']}ç§’\\\
          n\"\n            if snippet := item.get(\"snippet\", \"\"):\n          \
          \      md_content += f\"- **æ‘˜è¦**: {snippet[:100]}{'...' if len(snippet)>100\
          \ else ''}\\n\"\n            if cover := item.get(\"coverImage\"):\n   \
          \             md_content += f\"- **å°é¢**: ![å›¾ç‰‡]({cover})\\n\"\n         \
          \   md_content += \"\\n\"\n        \n        return {\"markdown\": md_content}\n\
          \    \n    except Exception as e:\n        return {\"markdown\": f\"## âš ï¸\
          \ å¤„ç†å¼‚å¸¸\\n{str(e)}\"}"
        code_language: python3
        desc: ''
        outputs:
          markdown:
            children: null
            type: string
        selected: false
        title: josnè½¬md
        type: code
        variables:
        - value_selector:
          - '1754643102235'
          - input_data
          variable: input_data
      height: 52
      id: '1754643106088'
      position:
        x: -436.424934191988
        y: -1514.2286015845405
      positionAbsolute:
        x: -436.424934191988
        y: -1514.2286015845405
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1754642999884'
          - markdown
          variable: markdown
        selected: false
        title: è§†é¢‘æœç´¢ç»“æœ
        type: end
      height: 88
      id: '1754644020839'
      position:
        x: -153.8062361503661
        y: -1699.0502454764078
      positionAbsolute:
        x: -153.8062361503661
        y: -1699.0502454764078
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1754643106088'
          - markdown
          variable: markdown
        selected: false
        title: åšå®¢æœç´¢ç»“æœ
        type: end
      height: 88
      id: '1754646053648'
      position:
        x: -153.8062361503661
        y: -1514.2286015845405
      positionAbsolute:
        x: -153.8062361503661
        y: -1514.2286015845405
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: 715.160207408867
      y: 2225.7594670142516
      zoom: 0.7739450617033755
