app:
  description: æœ¬å·¥ä½œæµä¸»è¦åŠŸèƒ½æ˜¯ç”¨æˆ·è¾“éœ€è¦çš„æ–°é—»èµ„è®¯æ•°é‡ï¼Œå€ŸåŠ©craw4aiçˆ¬å–www.aibase.comæ¯æ—¥æœ€æ–°AIæ–°é—»èµ„è®¯ï¼Œç»“åˆå¤§è¯­è¨€æ¨¡å‹+TTSè¯­éŸ³æ’­æŠ¥å½¢æˆæ¯æ—¥AIæ–°é—»+è¯­éŸ³æ’­æŠ¥å·¥ä½œæµ
  icon: ghost
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: AIèµ„è®¯æ¯æ—¥æ–°é—»+è¯­éŸ³æ’­æŠ¥å·¥ä½œæµ
  use_icon_as_answer_icon: false
kind: app
version: 0.1.5
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: code
      id: 1736414379726-source-1737530544739-target
      source: '1736414379726'
      sourceHandle: source
      target: '1737530544739'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: llm
      id: 1737530544739-source-1737530620810-target
      source: '1737530544739'
      sourceHandle: source
      target: '1737530620810'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: code
      id: 1738552651385-source-1738552718729-target
      source: '1738552651385'
      sourceHandle: source
      target: '1738552718729'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: answer
      id: 1738552718729-source-answer-target
      source: '1738552718729'
      sourceHandle: source
      target: answer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: template-transform
      id: 1737530620810-source-1738553119261-target
      source: '1737530620810'
      sourceHandle: source
      target: '1738553119261'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: template-transform
        targetType: tool
      id: 1738553119261-source-1738552651385-target
      source: '1738553119261'
      sourceHandle: source
      target: '1738552651385'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: æ–°é—»æ•°é‡
          max_length: 48
          options:
          - '2'
          required: true
          type: select
          variable: item
      height: 89
      id: '1736414379726'
      position:
        x: -27.140103876667297
        y: 247.38453878161886
      positionAbsolute:
        x: -27.140103876667297
        y: 247.38453878161886
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        answer: '{{#1738553119261.output#}}

          {{#1738552718729.result#}}'
        desc: ''
        selected: false
        title: ç›´æ¥å›å¤
        type: answer
        variables: []
      height: 123
      id: answer
      position:
        x: 1323.9280936455675
        y: 506.70767087364436
      positionAbsolute:
        x: 1323.9280936455675
        y: 506.70767087364436
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        code: "import requests\nimport json\ndef main(arg1: str) -> dict:\n    try:\n\
          \        # æ„é€ è¯·æ±‚URLå’Œå‚æ•°\n        url = 'http://127.0.0.1:8086/news/'\n\
          \        limit = arg1\n\n        # å‘é€GETè¯·æ±‚\n        response = requests.get(url,\
          \ params={'limit': limit})\n\n        # æ£€æŸ¥å“åº”çŠ¶æ€ç \n        if response.status_code\
          \ == 200:\n            # è¯·æ±‚æˆåŠŸï¼Œå¤„ç†ç»“æœ\n            result = response.json()\n\
          \n            # æå–æ–°é—»æ•°æ®å’Œæ–°é—»è¯¦æƒ…å­—ç¬¦ä¸²\n            news_list = result.get('news',\
          \ [])\n            newsdetail = result.get('newsdetail', \"\")\n\n     \
          \       # ç¡®ä¿ news_list æ˜¯ä¸€ä¸ªåˆ—è¡¨\n            if not isinstance(news_list, list):\n\
          \                return {\"error\": \"æœåŠ¡ç«¯è¿”å›çš„æ–°é—»æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼Œ'news' å­—æ®µåº”ä¸ºåˆ—è¡¨ã€‚\"}\n\
          \n            # æ ¼å¼åŒ–æ–°é—»æ•°æ®ï¼ˆå¦‚æœéœ€è¦ï¼‰\n            formatted_news = []\n       \
          \     for news_item in news_list:\n                if isinstance(news_item,\
          \ dict):  # å¦‚æœæ˜¯å­—å…¸ï¼Œç›´æ¥æ·»åŠ \n                    formatted_news.append(news_item)\n\
          \                elif isinstance(news_item, str):  # å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°è¯•è§£æä¸ºå­—å…¸\n  \
          \                  try:\n                        news_dict = json.loads(news_item)\
          \  # ä½¿ç”¨ json.loads è§£æå­—ç¬¦ä¸²\n                        formatted_news.append(news_dict)\n\
          \                    except Exception as e:\n                        print(f\"\
          è§£ææ–°é—»æ•°æ®æ—¶å‡ºé”™: {e}\")\n                else:\n                    print(\"æ— æ•ˆçš„æ–°é—»æ•°æ®æ ¼å¼\"\
          )\n\n            # è¿”å›æ ¼å¼åŒ–çš„æ–°é—»æ•°æ®å’Œæ–°é—»è¯¦æƒ…å­—ç¬¦ä¸²\n            return {\"news\": formatted_news,\
          \ \"newsdetail\": newsdetail}\n        else:\n            # è¯·æ±‚å¤±è´¥ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯\n\
          \            return {\"error\": f\"è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : {response.status_code}\"}\n\
          \n    except requests.exceptions.RequestException as e:\n        # æ•è·è¯·æ±‚å¼‚å¸¸\n\
          \        return {\"error\": f\"è¯·æ±‚å‡ºé”™: {str(e)}\"}"
        code_language: python3
        desc: ''
        outputs:
          news:
            children: null
            type: array[object]
          newsdetail:
            children: null
            type: string
        selected: false
        title: è°ƒç”¨æœåŠ¡ç«¯crawl4aiè·å–æ¯æ—¥AIèµ„è®¯æ–°é—»
        type: code
        variables:
        - value_selector:
          - '1736414379726'
          - item
          variable: arg1
      height: 53
      id: '1737530544739'
      position:
        x: 284.0152220117407
        y: 247.38453878161886
      positionAbsolute:
        x: 284.0152220117407
        y: 247.38453878161886
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: internlm/internlm2_5-7b-chat
          provider: siliconflow
        prompt_template:
        - id: 2cdb492c-3973-401d-913c-a8fee4c7fe0a
          role: system
          text: 'è¯·å¸®æˆ‘å¯¹ä»¥ä¸‹æ–‡ç« å†…å®¹è¿›è¡Œæ€»ç»“ï¼ŒåŒ…æ‹¬ç”¨ä¸‰ä¸ªéƒ¨åˆ†ï¼Œæ‘˜è¦ï¼Œæ–‡ç« è¦ç‚¹

            ğŸ·æ–‡ç« è¦ç‚¹ç”¨æ•°å­—åºå·åˆ—å‡ºã€‚

            ä¸è¦ä½¿ç”¨''**''åŠ ç²—æ ‡é¢˜ä¼˜åŒ–è¾“å‡ºæ ¼å¼ã€‚'
        - id: d2460303-5fe5-479b-b1c9-3d0f1c01f6dd
          role: user
          text: æ–‡æœ¬å†…å®¹ï¼š{{#1737530544739.news#}}
        selected: true
        title: æ–°é—»æ€»ç»“åŠ©ç†
        type: llm
        variables: []
        vision:
          enabled: false
      height: 97
      id: '1737530620810'
      position:
        x: 615.0960566045045
        y: 220.19946185117294
      positionAbsolute:
        x: 615.0960566045045
        y: 220.19946185117294
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        provider_id: fe2f4c5a-3fc5-4265-80f6-824c803d07de
        provider_name: siliconflowmakeaudioapi
        provider_type: api
        selected: false
        title: æ–°é—»è¯¦ç»†å†…å®¹è½¬æ¢è¯­éŸ³æ’­æŠ¥
        tool_configurations: {}
        tool_label: generate-audio_post
        tool_name: generate-audio_post
        tool_parameters:
          input:
            type: mixed
            value: '{{#1738553119261.output#}}'
          model:
            type: mixed
            value: FunAudioLLM/CosyVoice2-0.5B
          voice:
            type: mixed
            value: FunAudioLLM/CosyVoice2-0.5B:david
        type: tool
      height: 53
      id: '1738552651385'
      position:
        x: 1430.6589861398134
        y: 187.15743068817272
      positionAbsolute:
        x: 1430.6589861398134
        y: 187.15743068817272
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        code: "def main(arg1: str) -> str:\n    # é¦–å…ˆè§£æå¤–å±‚çš„ JSON å­—ç¬¦ä¸²\n    data = json.loads(arg1)\n\
          \    filename=data['filename']\n    url=data['etag']\n    markdown_result\
          \ = f\"<audio controls><source src='{url}' type='audio/mpeg'>{filename}</audio>\"\
          \n    return {\"result\": markdown_result} "
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æ–‡å­—è½¬éŸ³é¢‘æ–‡ä»¶å¤„ç†
        type: code
        variables:
        - value_selector:
          - '1738552651385'
          - text
          variable: arg1
      height: 53
      id: '1738552718729'
      position:
        x: 764.2473856361112
        y: 540.7478368173164
      positionAbsolute:
        x: 764.2473856361112
        y: 540.7478368173164
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        selected: false
        template: '{{ llmtext+"\n"+"ä¸‹é¢æ–°é—»è¯¦ç»†å†…å®¹ï¼š"+"\n"+newsdetail }}'
        title: llmæ–°é—»æ€»ç»“ä¿¡æ¯+æ–°é—»è¯¦ç»†ä¿¡æ¯åˆå¹¶
        type: template-transform
        variables:
        - value_selector:
          - '1737530620810'
          - text
          variable: llmtext
        - value_selector:
          - '1737530544739'
          - newsdetail
          variable: newsdetail
      height: 53
      id: '1738553119261'
      position:
        x: 947.9912276567427
        y: 220.19946185117294
      positionAbsolute:
        x: 947.9912276567427
        y: 220.19946185117294
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        author: å‘¨è¾‰
        desc: ''
        height: 245
        selected: false
        showAuthor: true
        text: '{"root":{"children":[{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"æœ¬å·¥ä½œæµä¸»è¦ä½¿ç”¨äº†LLMå¤§è¯­è¨€æ¨¡å‹+crawl4aiè·å–æ¯æ—¥æœ€æ–°çš„æ–°é—»èµ„è®¯ï¼Œé€šè¿‡è¯­éŸ³æ’­æŠ¥åŠŸèƒ½å®ç°ä¸€ä¸ªæ¯æ—¥AIèµ„è®¯æ–°é—»è·å–+è¯­éŸ³æ’­æŠ¥çš„åŠŸèƒ½ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0},{"children":[{"detail":0,"format":0,"mode":"normal","style":"","text":"
          è€ƒè™‘ç”Ÿæˆè¯­éŸ³çš„æ—¶æ•ˆæ€§æ–°é—»æ¡ç ç›®å‰åšæˆä¸‹æ‹‰é€‰é¡¹é€‰æ‹©2æ¡æ–°é—»æ’­æŠ¥ã€‚2æ¡æ–°é—»æ’­æŠ¥çš„æ—¶é—´å¤§æ¦‚åœ¨ 5åˆ†é’Ÿå·¦å³ã€‚","type":"text","version":1}],"direction":"ltr","format":"","indent":0,"type":"paragraph","version":1,"textFormat":0}],"direction":"ltr","format":"","indent":0,"type":"root","version":1}}'
        theme: blue
        title: ''
        type: ''
        width: 488
      height: 245
      id: '1738553820665'
      position:
        x: -52.46682494203276
        y: 358.6119717633246
      positionAbsolute:
        x: -52.46682494203276
        y: 358.6119717633246
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom-note
      width: 488
    viewport:
      x: 41.25284483232349
      y: 41.07067420123835
      zoom: 0.7169776240079166
