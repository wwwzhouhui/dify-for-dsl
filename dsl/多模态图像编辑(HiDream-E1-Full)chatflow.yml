app:
  description: ‰ΩøÁî®giteeÂπ≥Âè∞‰∏äÊèê‰æõÁöÑHiDream-E1-Full ÂÆûÁé∞Â§öÊ®°ÊÄÅÂõæÁâáÁºñËæëÂäüËÉΩÔºà‰∏ÄÂè•ËØùPSÔºâ
  icon: ü§ñ
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: Â§öÊ®°ÊÄÅÂõæÂÉèÁºñËæë(HiDream-E1-Full)chatflow
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: bowenliang123/base64_codec:0.3.0@bde22f1eb5e62a1bf7b115fbaa4bebb20c1ba756d3425c91bdfdd38d55cf2e43
kind: app
version: 0.1.5
workflow:
  conversation_variables:
  - description: AIÁªòÁîªÁîüÊàêÁöÑÂõæÁâáURL
    id: 20e0f38e-aa5c-40bf-ab08-fa9350f2040d
    name: picture_url
    selector:
    - conversation
    - picture_url
    value: ''
    value_type: string
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 500
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 100
        video_file_size_limit: 500
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: code
      id: 1746806711924-source-1746843751923-target
      source: '1746806711924'
      sourceHandle: source
      target: '1746843751923'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: tool
      id: 1746843751923-source-1746850399850-target
      source: '1746843751923'
      sourceHandle: source
      target: '1746850399850'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: code
      id: 1746850399850-source-1746850419434-target
      source: '1746850399850'
      sourceHandle: source
      target: '1746850419434'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: answer
      id: 1746850419434-source-answer-target
      source: '1746850419434'
      sourceHandle: source
      target: answer
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1746850419434-source-1746850812091-target
      source: '1746850419434'
      sourceHandle: source
      target: '1746850812091'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1746806580624-source-1746852321322-target
      source: '1746806580624'
      sourceHandle: source
      target: '1746852321322'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: tool
      id: 1746852321322-false-1746806711924-target
      source: '1746852321322'
      sourceHandle: 'false'
      target: '1746806711924'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: tool
      id: 1746852321322-true-1746859204198-target
      source: '1746852321322'
      sourceHandle: 'true'
      target: '1746859204198'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: tool
        targetType: code
      id: 1746859204198-source-1746859267150-target
      source: '1746859204198'
      sourceHandle: source
      target: '1746859267150'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: answer
      id: 1746859267150-source-1746859295512-target
      source: '1746859267150'
      sourceHandle: source
      target: '1746859295512'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: assigner
      id: 1746859267150-source-1746859321144-target
      source: '1746859267150'
      sourceHandle: source
      target: '1746859321144'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: ÂºÄÂßã
        type: start
        variables:
        - label: ÊèêÁ§∫ËØç
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: prompt
        - allowed_file_extensions: []
          allowed_file_types:
          - image
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: ÂõæÁâá
          max_length: 48
          options: []
          required: true
          type: file
          variable: imagefile
      height: 115
      id: '1746806580624'
      position:
        x: -232.01977804081687
        y: 296.8139953965966
      positionAbsolute:
        x: -232.01977804081687
        y: 296.8139953965966
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1746850419434.result#}}'
        desc: ''
        selected: false
        title: Áõ¥Êé•ÂõûÂ§ç
        type: answer
        variables: []
      height: 105
      id: answer
      position:
        x: 1595.2914101284305
        y: 282
      positionAbsolute:
        x: 1595.2914101284305
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Input Image File
            ja_JP: Input Image File
            pt_BR: Input Image File
            zh_Hans: ËæìÂÖ•ÁöÑÂõæÁâáÊñá‰ª∂
          label:
            en_US: Input Image File
            ja_JP: Input Image File
            pt_BR: Input Image File
            zh_Hans: ËæìÂÖ•ÁöÑÂõæÁâáÊñá‰ª∂
          llm_description: A tool for encoding image file to Base64-encoded text
          max: null
          min: null
          name: input_image
          options: []
          placeholder: null
          precision: null
          required: true
          scope: null
          template: null
          type: file
        params:
          input_image: ''
        provider_id: bowenliang123/base64_codec/base64_codec
        provider_name: bowenliang123/base64_codec/base64_codec
        provider_type: builtin
        selected: false
        title: ÂõæÁâáËΩ¨Base64
        tool_configurations: {}
        tool_label: ÂõæÁâáËΩ¨Base64
        tool_name: base64_image_encoder
        tool_parameters:
          input_image:
            type: variable
            value:
            - '1746806580624'
            - imagefile
        type: tool
      height: 53
      id: '1746806711924'
      position:
        x: 384
        y: 282
      positionAbsolute:
        x: 384
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\ndef main(json_input_string: str) -> dict:\n    result_value\
          \ = None\n    error_message = None\n\n    try:\n        text_field_value=json_input_string\n\
          \        if not text_field_value:\n            error_message = \"ÈîôËØØÔºöJSON\
          \ Êï∞ÊçÆ‰∏≠Êú™ÊâæÂà∞ 'text' Â≠óÊÆµ„ÄÇ\"\n        elif not isinstance(text_field_value, str):\n\
          \            error_message = \"ÈîôËØØÔºö'text' Â≠óÊÆµÁöÑÂÄº‰∏çÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûã„ÄÇ\"\n        elif \"\
          base64,\" not in text_field_value:\n            error_message = \"ÈîôËØØÔºö'text'\
          \ Â≠óÊÆµÁöÑÂÄº‰∏çÂåÖÂê´ 'base64,' Ê†áËÆ∞ÔºåÊ†ºÂºè‰∏çÁ¨¶ÂêàÈ¢ÑÊúü„ÄÇ\"\n        else:\n            parts = text_field_value.split(\"\
          base64,\", 1)\n            # Á°Æ‰øù \"base64,\" ÂêéÈù¢Á°ÆÂÆûÊúâÂÜÖÂÆπ\n            if len(parts)\
          \ > 1 and parts[1]: \n                result_value = parts[1]\n        \
          \    else:\n                error_message = \"ÈîôËØØÔºö'text' Â≠óÊÆµÂú® 'base64,' Ê†áËÆ∞ÂêéÊ≤°ÊúâÊï∞ÊçÆ„ÄÇ\"\
          \n    \n    except json.JSONDecodeError:\n        error_message = \"ÈîôËØØÔºöÊó†Ê≥ïËß£ÊûêËæìÂÖ•ÁöÑ\
          \ JSON Â≠óÁ¨¶‰∏≤„ÄÇ\"\n    except Exception as e:\n        error_message = f\"Â§ÑÁêÜËøáÁ®ã‰∏≠ÂèëÁîüÊú™Áü•ÈîôËØØ:\
          \ {str(e)}\"\n\n    # Á°Æ‰øùÂßãÁªàËøîÂõûÂåÖÂê´ \"result\" Âíå \"error\" ÈîÆÁöÑÂ≠óÂÖ∏\n    # Dify Âπ≥Âè∞ÂèØËÉΩ‰ºö‰∏ìÈó®Êü•Êâæ\
          \ \"result\" ÈîÆ„ÄÇ\n    # Â¶ÇÊûúÂèëÁîüÈîôËØØÔºå\"result\" ÁöÑÂÄº‰∏∫ NoneÔºåÈîôËØØ‰ø°ÊÅØËÆ∞ÂΩïÂú® \"error\" ÈîÆ‰∏≠„ÄÇ\n\
          \    return {\"result\": result_value, \"error\": error_message}"
        code_language: python3
        desc: ''
        outputs:
          error:
            children: null
            type: string
          result:
            children: null
            type: string
        selected: false
        title: ‰ª£Á†ÅÊâßË°å
        type: code
        variables:
        - value_selector:
          - '1746806711924'
          - text
          variable: json_input_string
      height: 53
      id: '1746843751923'
      position:
        x: 688
        y: 282
      positionAbsolute:
        x: 688
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: ÊèèËø∞ÂõæÂÉèÊâÄÈúÄÈ£éÊ†ºÊàñËΩ¨Êç¢ÁöÑÊñáÊú¨ÊèêÁ§∫ËØç„ÄÇ
            ja_JP: ÊèèËø∞ÂõæÂÉèÊâÄÈúÄÈ£éÊ†ºÊàñËΩ¨Êç¢ÁöÑÊñáÊú¨ÊèêÁ§∫ËØç„ÄÇ
            pt_BR: ÊèèËø∞ÂõæÂÉèÊâÄÈúÄÈ£éÊ†ºÊàñËΩ¨Êç¢ÁöÑÊñáÊú¨ÊèêÁ§∫ËØç„ÄÇ
            zh_Hans: ÊèèËø∞ÂõæÂÉèÊâÄÈúÄÈ£éÊ†ºÊàñËΩ¨Êç¢ÁöÑÊñáÊú¨ÊèêÁ§∫ËØç„ÄÇ
          label:
            en_US: prompt
            ja_JP: prompt
            pt_BR: prompt
            zh_Hans: prompt
          llm_description: ÊèèËø∞ÂõæÂÉèÊâÄÈúÄÈ£éÊ†ºÊàñËΩ¨Êç¢ÁöÑÊñáÊú¨ÊèêÁ§∫ËØç„ÄÇ
          max: null
          min: null
          name: prompt
          options: []
          placeholder:
            en_US: ÊèèËø∞ÂõæÂÉèÊâÄÈúÄÈ£éÊ†ºÊàñËΩ¨Êç¢ÁöÑÊñáÊú¨ÊèêÁ§∫ËØç„ÄÇ
            ja_JP: ÊèèËø∞ÂõæÂÉèÊâÄÈúÄÈ£éÊ†ºÊàñËΩ¨Êç¢ÁöÑÊñáÊú¨ÊèêÁ§∫ËØç„ÄÇ
            pt_BR: ÊèèËø∞ÂõæÂÉèÊâÄÈúÄÈ£éÊ†ºÊàñËΩ¨Êç¢ÁöÑÊñáÊú¨ÊèêÁ§∫ËØç„ÄÇ
            zh_Hans: ÊèèËø∞ÂõæÂÉèÊâÄÈúÄÈ£éÊ†ºÊàñËΩ¨Êç¢ÁöÑÊñáÊú¨ÊèêÁ§∫ËØç„ÄÇ
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: Ê∫êÂõæÂÉèÁöÑ base64 ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤„ÄÇ
            ja_JP: Ê∫êÂõæÂÉèÁöÑ base64 ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤„ÄÇ
            pt_BR: Ê∫êÂõæÂÉèÁöÑ base64 ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤„ÄÇ
            zh_Hans: Ê∫êÂõæÂÉèÁöÑ base64 ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤„ÄÇ
          label:
            en_US: image_base64
            ja_JP: image_base64
            pt_BR: image_base64
            zh_Hans: image_base64
          llm_description: Ê∫êÂõæÂÉèÁöÑ base64 ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤„ÄÇ
          max: null
          min: null
          name: image_base64
          options: []
          placeholder:
            en_US: Ê∫êÂõæÂÉèÁöÑ base64 ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤„ÄÇ
            ja_JP: Ê∫êÂõæÂÉèÁöÑ base64 ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤„ÄÇ
            pt_BR: Ê∫êÂõæÂÉèÁöÑ base64 ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤„ÄÇ
            zh_Hans: Ê∫êÂõæÂÉèÁöÑ base64 ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤„ÄÇ
          precision: null
          required: true
          scope: null
          template: null
          type: string
        params:
          image_base64: ''
          prompt: ''
        provider_id: c9a161d7-8a2e-4129-a2d0-d99f85402358
        provider_name: gitee-generateHiDreamE1Image
        provider_type: api
        selected: false
        title: HiDream E1ÂõæÂÉèÁîüÊàê_forbase64
        tool_configurations: {}
        tool_label: generateHiDreamE1Image
        tool_name: generateHiDreamE1Image
        tool_parameters:
          image_base64:
            type: mixed
            value: '{{#1746843751923.result#}}'
          prompt:
            type: mixed
            value: '{{#1746806580624.prompt#}}'
        type: tool
      height: 53
      id: '1746850399850'
      position:
        x: 973.6389844388307
        y: 282
      positionAbsolute:
        x: 973.6389844388307
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(arg1: str) -> str:\n    import json\n    data = json.loads(arg1)\n\
          \    filename=data['filename']\n    url=data['etag']\n    markdown_result\
          \ = f\"![{filename}]({url})\"\n    return {\"result\": markdown_result,\"\
          url\": url}"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
          url:
            children: null
            type: string
        selected: false
        title: ‰ª£Á†ÅÊâßË°å 2
        type: code
        variables:
        - value_selector:
          - '1746850399850'
          - text
          variable: arg1
      height: 53
      id: '1746850419434'
      position:
        x: 1256.0377896609846
        y: 282
      positionAbsolute:
        x: 1256.0377896609846
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1746850419434'
          - url
          variable_selector:
          - conversation
          - picture_url
          write_mode: over-write
        selected: false
        title: ÂèòÈáèËµãÂÄº
        type: assigner
        version: '2'
      height: 87
      id: '1746850812091'
      position:
        x: 1595.2914101284305
        y: 426
      positionAbsolute:
        x: 1595.2914101284305
        y: 426
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: not empty
            id: b88baa5d-adee-4b6b-9681-9c72c70a21c8
            value: ''
            varType: string
            variable_selector:
            - conversation
            - picture_url
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: Êù°‰ª∂ÂàÜÊîØ
        type: if-else
      height: 125
      id: '1746852321322'
      position:
        x: 58.092101274873755
        y: 141.60544721589008
      positionAbsolute:
        x: 58.092101274873755
        y: 141.60544721589008
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_team_authorization: true
        output_schema: null
        paramSchemas:
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: È£éÊ†ºËΩ¨Êç¢ÊèêÁ§∫ËØç
            ja_JP: È£éÊ†ºËΩ¨Êç¢ÊèêÁ§∫ËØç
            pt_BR: È£éÊ†ºËΩ¨Êç¢ÊèêÁ§∫ËØç
            zh_Hans: È£éÊ†ºËΩ¨Êç¢ÊèêÁ§∫ËØç
          label:
            en_US: prompt
            ja_JP: prompt
            pt_BR: prompt
            zh_Hans: prompt
          llm_description: È£éÊ†ºËΩ¨Êç¢ÊèêÁ§∫ËØç
          max: null
          min: null
          name: prompt
          options: []
          placeholder:
            en_US: È£éÊ†ºËΩ¨Êç¢ÊèêÁ§∫ËØç
            ja_JP: È£éÊ†ºËΩ¨Êç¢ÊèêÁ§∫ËØç
            pt_BR: È£éÊ†ºËΩ¨Êç¢ÊèêÁ§∫ËØç
            zh_Hans: È£éÊ†ºËΩ¨Êç¢ÊèêÁ§∫ËØç
          precision: null
          required: true
          scope: null
          template: null
          type: string
        - auto_generate: null
          default: null
          form: llm
          human_description:
            en_US: ÂæÖÂ§ÑÁêÜÂõæÁâáÁöÑURL
            ja_JP: ÂæÖÂ§ÑÁêÜÂõæÁâáÁöÑURL
            pt_BR: ÂæÖÂ§ÑÁêÜÂõæÁâáÁöÑURL
            zh_Hans: ÂæÖÂ§ÑÁêÜÂõæÁâáÁöÑURL
          label:
            en_US: imageurl
            ja_JP: imageurl
            pt_BR: imageurl
            zh_Hans: imageurl
          llm_description: ÂæÖÂ§ÑÁêÜÂõæÁâáÁöÑURL
          max: null
          min: null
          name: imageurl
          options: []
          placeholder:
            en_US: ÂæÖÂ§ÑÁêÜÂõæÁâáÁöÑURL
            ja_JP: ÂæÖÂ§ÑÁêÜÂõæÁâáÁöÑURL
            pt_BR: ÂæÖÂ§ÑÁêÜÂõæÁâáÁöÑURL
            zh_Hans: ÂæÖÂ§ÑÁêÜÂõæÁâáÁöÑURL
          precision: null
          required: true
          scope: null
          template: null
          type: string
        params:
          imageurl: ''
          prompt: ''
        provider_id: 8aa68883-b92b-411e-bf08-afb1b6f174fc
        provider_name: HiDream E1 ÂõæÂÉèÁîüÊàê_forimageurl
        provider_type: api
        selected: true
        title: HiDream E1ÂõæÂÉèÁîüÊàê_forimageurl
        tool_configurations: {}
        tool_label: difyforgiteegenerate-HiDream-E1_post
        tool_name: difyforgiteegenerate-HiDream-E1_post
        tool_parameters:
          imageurl:
            type: mixed
            value: '{{#conversation.picture_url#}}'
          prompt:
            type: mixed
            value: '{{#sys.query#}}'
        type: tool
      height: 53
      id: '1746859204198'
      position:
        x: 395.1104965474474
        y: 161.0488161739232
      positionAbsolute:
        x: 395.1104965474474
        y: 161.0488161739232
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "def main(arg1: str) -> str:\n    import json\n    data = json.loads(arg1)\n\
          \    filename=data['filename']\n    url=data['etag']\n    markdown_result\
          \ = f\"![{filename}]({url})\"\n    return {\"result\": markdown_result,\"\
          url\": url}"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
          url:
            children: null
            type: string
        selected: false
        title: ‰ª£Á†ÅÊâßË°å 3
        type: code
        variables:
        - value_selector:
          - '1746859204198'
          - text
          variable: arg1
      height: 53
      id: '1746859267150'
      position:
        x: 697.6407620551718
        y: 161.0488161739232
      positionAbsolute:
        x: 697.6407620551718
        y: 161.0488161739232
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        answer: '{{#1746859267150.result#}}'
        desc: ''
        selected: false
        title: Áõ¥Êé•ÂõûÂ§ç 2
        type: answer
        variables: []
      height: 105
      id: '1746859295512'
      position:
        x: 1047.5524827372374
        y: 51.79560012402294
      positionAbsolute:
        x: 1047.5524827372374
        y: 51.79560012402294
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        items:
        - input_type: variable
          operation: over-write
          value:
          - '1746859267150'
          - url
          variable_selector:
          - conversation
          - picture_url
          write_mode: over-write
        selected: false
        title: ÂèòÈáèËµãÂÄº 2
        type: assigner
        version: '2'
      height: 87
      id: '1746859321144'
      position:
        x: 1047.5524827372374
        y: 184.6851035765755
      positionAbsolute:
        x: 1047.5524827372374
        y: 184.6851035765755
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 176.3040567319772
      y: 124.0909332931912
      zoom: 0.7937005259840989
